{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template block_g_statistics/statistics

    Appearance of the plugin

    Example context (json):
    {
    }
}}
<div>
    {{TEST}}

    {{#show_statistics }}
        <h5>{{block_statistics_title}}</h5>

        {{#show_sum_balls}}
            <div class="d-flex mt-2">
                <div>
                    <strong>{{block_statistics_balls}}:</strong>
                </div>
                <div class="d-flex flex-column ml-2">
                    {{# sum_balls_array}}
                        <div class="d-flex align-items-center justify-content-center">{{value}} <a href="#" class="badge bg-secondary text-white text-decoration-none ml-1" title="{{description}}">?</a></div>
                    {{/ sum_balls_array}}
                </div>
            </div>
        {{/show_sum_balls}}

        {{#show_mean_value}}
            <div class="d-flex mt-2">
                <div>
                    <strong>{{block_statistics_mean_grade}}:</strong>
                </div>
                <div class="d-flex flex-column ml-2">
                    {{# mean_value_array }}
                        <div class="d-flex align-items-center justify-content-center">{{value}} <a href="#" class="badge bg-secondary text-white text-decoration-none ml-1" title="{{description}}">?</a></div>
                    {{/ mean_value_array }}
                </div>
            </div>
        {{/show_mean_value}}

        {{#show_task_count_comlpited}}
            <h6 class="mt-4">{{block_statistics_count_complited_tasks}}</h6>
            <div class="d-flex flex-column ml-4">
                {{# task_count_comlpited_array }}
                    <div class="mt-1">{{description}}: {{value}}</div>
                {{/ task_count_comlpited_array }}
            </div>
        {{/show_task_count_comlpited}}
        
        {{#show_mean_value_for_course}}
            <div class="d-flex mt-2">
                <div>
                    <strong>{{block_statistics_mean_grade_for_course}}:</strong>
                </div>
                <div class="d-flex flex-column ml-2">
                    {{# mean_value_for_course_array }}
                        <div class="d-flex align-items-center justify-content-center">{{value}} <a href="#" class="badge bg-secondary text-white text-decoration-none ml-1" title="{{description}}">?</a></div>
                    {{/ mean_value_for_course_array }}
                </div>
            </div>
        {{/show_mean_value_for_course}}


        {{# show_user_statistics }}
            {{#user_statistics_array}}
                <h6 class='mt-4'>{{block_statistics_title_for_user}}: {{user_name}}</h6> 

                {{# show_user_maen_value }}
                    <div class="d-flex mt-2">
                        <div>
                            <strong>{{block_statistics_mean_grade}}:</strong>
                        </div>
                        <div class="d-flex flex-column ml-2">
                            {{# user_statistics_mean_value }}
                                <div class="d-flex align-items-center justify-content-center">{{value}} <a href="#" class="badge bg-secondary text-white text-decoration-none ml-1" title="{{description}}">?</a></div>
                            {{/ user_statistics_mean_value }}
                        </div>
                    </div>
                {{/ show_user_maen_value }}

                {{# show_user_balls }}
                    <div class="d-flex mt-2">
                        <div>
                            <strong>{{block_statistics_balls}}:</strong>
                        </div>
                        <div class="d-flex flex-column ml-2">
                            {{# user_statistics_balls }}
                                <div class="d-flex align-items-center justify-content-center">{{value}} <a href="#" class="badge bg-secondary text-white text-decoration-none ml-1" title="{{description}}">?</a></div>
                            {{/ user_statistics_balls }}
                        </div>
                    </div>
                {{/ show_user_balls }}

                {{# show_user_count_task }}
                    <h6 class="mt-2 m-0">{{block_statistics_count_complited_tasks}}</h6>
                    <div class="d-flex flex-column ml-4">
                        {{# user_task_count }}
                            <div class="mt-1">{{description}}: {{value}}</div>
                        {{/ user_task_count }}
                    </div>
                {{/ show_user_count_task }}

                {{# show_user_rang }}
                    <div class="mt-2"><strong>{{block_statirang_for_admin}}: </strong>{{user_rang}}</div>
                {{/ show_user_rang }}
            {{/user_statistics_array}}
        {{/ show_user_statistics }}
        
    {{/show_statistics }}
</>

{{#show_rating_table}}
<div class="mt-4">
    <h5>{{block_leaderboard_title}}</h5>

    <table class="table table-striped">
        <thead>
            <tr>
            <th scope="col">#</th>
            <th scope="col">{{block_leaderboard_username}}</th>
            <th scope="col">{{block_leaderboard_balls}}</th>
            </tr>
        </thead>
        <tbody>
            {{#users}}
                {{#isuser}}
                    {{#status}}
                        <tr>
                        <th scope="row">{{rang}}</th>
                        <td>
                            <b>
                                <a href="{{wwwroot}}/user/view.php?id={{id}}&amp;course={{courseid}}">
                                    {{lastname}} {{firstname}}
                                </a>
                            </b>
                        </td>
                        <td><b>{{balls}}</b></td>
                    {{/status}}
                    {{^status}}
                        <tr>
                        <th scope="row">{{rang}}</th>
                        <td>
                            <a href="{{wwwroot}}/user/view.php?id={{id}}&amp;course={{courseid}}">
                                {{lastname}} {{firstname}}
                            </a>
                        </td>
                        <td>{{balls}}</td>
                    {{/status}}
                {{/isuser}}
                {{^isuser}}
                    <tr>
                    <th scope="row">###</th>
                    <td><b>###</b></td>
                    <td><b>###</b></td>
                {{/isuser}}
            {{/users}}
        </tbody>
    </table>
</div>
{{/show_rating_table}}

